% $Id: INF_Poster.tex 7714 2011-08-31 17:34:46Z tkren $
%
% TU Wien - Faculty of Informatics
% poster template
%
% This template is using the beamer document class and beamerposter package, see
% <http://www.ctan.org/tex-archive/macros/latex/contrib/beamer/>
% <http://www.ctan.org/tex-archive/macros/latex/contrib/beamerposter/>
% <http://www-i6.informatik.rwth-aachen.de/~dreuw/latexbeamerposter.php>
%
% For questions and comments send an email to
% Thomas Krennwallner <tkren@kr.tuwien.ac.at>
%

\documentclass[final,hyperref={pdfpagelabels=true}]{beamer}

\usepackage{TUINFPST}
\usepackage{minted}
% \usepackage{graphicx}
\usepackage[export]{adjustbox}
\usepackage{lipsum}
\usepackage{longtable,booktabs}
\usetikzlibrary{matrix}

% block styling
\setbeamercolor{block body}{fg=black,bg=white}
\setbeamercolor{block title}{fg=TuWienBlue,bg=white}
\setbeamertemplate{block begin}{
  \begin{beamercolorbox}{block title}%
    \begin{tikzpicture}%
      \node[draw,rectangle,line width=3pt,rounded corners=0pt,inner sep=0pt]{%
        \begin{minipage}[c][2cm]{\linewidth}
          \centering\textbf{\insertblocktitle}
        \end{minipage}
      };
    \end{tikzpicture}%
  \end{beamercolorbox}
  \vspace*{1cm}
  \begin{beamercolorbox}{block body}%
}
\setbeamertemplate{block end}{
  \end{beamercolorbox}
  \vspace{2cm}
}

% figure numbers
% https://tex.stackexchange.com/questions/127145/beamer-presentation-figure-has-no-number
\setbeamertemplate{caption}[numbered]

\title[European Master's Program in Computational Logic]{
Complete and Competitive\\
  DRAT Proof Checking
}
\author[aclopte@gmail.com]{Johannes Altmanninger}
\institute[]{%
  Technische Universit{\"a}t Wien\\[0.25\baselineskip]
  Institute of Logic and Computation\\[0.25\baselineskip]
  Arbeitsbereich: Formal Methods in Systems Engineering\\[0.25\baselineskip]
  Betreuer: Associate Prof. Dipl.-Ing. D.Phil. Georg Weissenbacher
}
\titlegraphic{\adjincludegraphics[height=52mm,trim={0 0 {.37\width} 0},clip]{forsyte.png}}
\date[\today]{\today}
\subject{epilog}
\keywords{SAT solving, proof systems, implementation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Display a grid to help align images 
% \beamertemplategridbackground[1cm]

% for crop marks, uncomment the following line
% \usepackage[cross,width=88truecm,height=123truecm,center]{crop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{frame}[fragile]
  \begin{columns}[t]
    \begin{column}{.45\textwidth}

    \begin{block}{Motivation}
        \begin{itemize}
            \item SAT solvers produce DRAT proofs that are incorrect due to
            spurious reason deletions
            \item proof checkers remedy this by ignoring reason deletions
            \item properly handling reason deletions requires a complex
            algorithm with a possible performance impact
        \end{itemize}

	\begin{columns}[T]
    	    \begin{column}{0.45\textwidth}
        	    \vspace{1cm}
		    \textbf{Example:} If clause $\overline{x} y$ is deleted,
		    then $\square$ can no longer be derived.
    	    \end{column}
    	    \begin{column}{.45\textwidth}
                \begin{tikzpicture}[
                        dep/.style={->,line width=1.5mm}
                    ]
                  \matrix (m) [matrix of math nodes,row sep=3em,column sep=2em,minimum width=2em]
                  {
                     x & \textcolor{red}{\overline{x}y}	& \overline{x}\overline{y} \\
                         & \square 			&     \\
                     };
                  \draw [dep] (m-1-1) -- (m-2-2);
                  \draw [dep,dash pattern=on 3mm off 3mm,red] (m-1-2) -- (m-2-2);
                  \draw [dep] (m-1-3) -- (m-2-2);
                \end{tikzpicture}
    	    \end{column}
	\end{columns}

    \end{block}

    \begin{block}{Contributions}
        \begin{itemize}
		\item provide patches for SAT solvers to produce correct proofs
		\item extension of SICK incorrectness certificate, giving
		a counter-example for an incorrect proof
		\item implement efficient checker to measure performance
		impact of reason deletions
        \end{itemize}
    \end{block}


    \begin{block}{Avoiding Reason Deletions in \texttt{MiniSat}}
	\begin{itemize}
            \item emit a unit clause before deleting a reason (\texttt{locked}) clause.
            \item yields correct proofs matching the solver's behavior
            \item patch for 2018 SAT competition winner analoguous
	\end{itemize}
	\vspace{1cm}
        {\footnotesize
            \begin{minted}[]{diff}
diff --git a/minisat/core/Solver.cc b/minisat/core/Solver.cc
index ddc3801..5941449 100644
--- a/minisat/core/Solver.cc
+++ b/minisat/core/Solver.cc
@@ -632,9 +632,13 @@ void Solver::removeSatisfied(vec<CRef>& cs)
     int i, j;
     for (i = j = 0; i < cs.size(); i++){
         Clause& c = ca[cs[i]];
-        if (satisfied(c))
+        if (satisfied(c)) {
+            if (output != NULL && locked(c)) {
+                Lit unit = c[0];
+                fprintf(output, "%i 0\n",
+                        (var(unit) + 1) * (-2 * sign(unit) + 1));
+            }
         removeClause(cs[i]);
-        else{
+        } else{
            \end{minted}
        }
    \end{block}
    \end{column}

    \begin{column}{.45\textwidth}
    \begin{block}{SICK Format}
        \begin{itemize}
            \item \emph{small} artifact to \emph{efficiently} certify
            incorrectness of a proof
            \item can be verified by our tool \texttt{sick-check}
        \end{itemize}
        \vspace{1cm}
        \begin{columns}[t]
            \begin{column}{.25\textwidth}
                formula\\
                \texttt{p cnf 2 2\\-1 -2 0\\ -1\ \ 2 0\\}
                incorrect DRAT proof\\
                \texttt{1 0\\0\\}
            \end{column}
            \begin{column}{.8\textwidth}
                \texttt{proof\_format = "DRAT-arbitrary-pivot"\\
proof\_step     = 1\\
natural\_model  = [-1, ]\\
\lbrack\lbrack{}witness\rbrack\rbrack{}\\
failing\_clause = [-2, -1, ]\\
failing\_model  = [2, ]\\
pivot          = 1\\
                }
            \end{column}
        \end{columns}
    \end{block}
    \begin{block}{Implementation}
        \begin{itemize}
            \item available at \url{https://github.com/krobelus/rate}
            \item written in Rust
            \item competitive performance (figure \ref{fig:cactus-time})
        \end{itemize}
    \end{block}

    \begin{figure}
        \centering
        \caption{Distribution of Proof Checkers' runtime\label{fig:cactus-time}}
        \includegraphics[scale=2]{../p/cactus-time.png}
    \end{figure}

    \textbf{Insight:} an excessive number of reason deletions
    has a noticeable impact on checking runtime (figure
    \ref{fig:correlation-reason-deletions-time-delta}), but not on memory usage.
    \vspace{1cm}

    \begin{figure}
        \centering
        \caption{Overhead in seconds of handling reason deletions\label{fig:correlation-reason-deletions-time-delta}}
        \includegraphics[scale=2]{../p/correlation-reason-deletions-time-delta.png}
    \end{figure}

    \end{column}
  \end{columns}
\end{frame}

\end{document}

%%% Local Variables:
%%% TeX-PDF-mode: t
%%% TeX-debug-bad-boxes: t
%%% TeX-master: t
%%% TeX-parse-self: t
%%% TeX-auto-save: t
%%% reftex-plug-into-AUCTeX: t
%%% End:
